gefo@Ubuntu:~/Downloads$ swipl game.pl
Welcome to SWI-Prolog (threaded, 64 bits, version 8.4.2)
SWI-Prolog comes with ABSOLUTELY NO WARRANTY. This is free software.
Please run ?- license. for legal details.

For online help and background, visit https://www.swi-prolog.org
For built-in help, use ?- help(Topic). or ?- apropos(Word).

?- consult('game.pl').
true.

?- старт.
ОТЕЛЬ 'У ПОГИБШЕГО АЛЬПИНИСТА'

Текстовая игра по мотивам повести Аркадия и Бориса Стругацких.

Вы - Петер Глебски, инспектор полиции в отпуске. Приехали в удаленный горный отель на две недели отдыха.
Но отдых не задался: вечером в отель явился странный однорукий незнакомец, предствавившийся Луарвиком, он ищет Олафа.
Хозяин передал гостя Кайсе, а вы отправились вместе со Сневаром к номеру Олафа, но столкнулись с непредвиденными обстоятельствами...
Теперь вы должны расследовать убийство и раскрыть тайны отеля.

Команды:
  старт.           --> Начать расследование
  справка.               - Показать этот список команд
  инвентарь.       --> Проверить инвентарь
  осмотреться.     --> Осмотреться вокруг
  взять('предмет'). --> Взять предмет
  осмотреть('предмет'). --> Осмотреть предмет внимательно
  использовать('предмет'). --> Использовать предмет
  поговорить('персонаж'). --> Поговорить с персонажем
  допрос('персонаж'). --> Начать официальный допрос
  остановить.      --> Выйти из игры



Вы находитесь: Холл
Входная зона отеля. Здесь ощущеается теплый запах камина и старого дерева, а низкие столики тускло отсвечивают лаком. Хозяин Алекс Сневар обычно сидит за столиком с бумагами. Впереди лестница ведёт на второй этаж. Сбоку дверь в Каминную открыта.

Предметы в комнате:
    Фирменная настойка
Персонажи здесь:
    Алекс Сневар
Куда можно пойти:
    Каминная
    Контора
    Кухня
    Коридор к номерам Мозесов
    Коридор 2 этаж
true.

?- 'Контора'.
Вы находитесь: Контора
Кабинет Алекса Сневара. Стол, уютное госетвое кресло, учётные книги, сейф. На столе лежат ключи от номеров. Можно покинуть Контору.

Предметы в комнате:
    Связка ключей
Персонажи здесь:
Куда можно пойти:
    Холл
true.

?- взять('Связка ключей').
Вы взяли: Связка ключей
Теперь вы можете открывать запертые двери!
true .

?- 'Холл'.
Вы находитесь: Холл
Входная зона отеля. Здесь ощущеается теплый запах камина и старого дерева, а низкие столики тускло отсвечивают лаком. Хозяин Алекс Сневар обычно сидит за столиком с бумагами. Впереди лестница ведёт на второй этаж. Сбоку дверь в Каминную открыта.

Предметы в комнате:
    Фирменная настойка
Персонажи здесь:
    Алекс Сневар
Куда можно пойти:
    Каминная
    Контора
    Кухня
    Коридор к номерам Мозесов
    Коридор 2 этаж
true.

?- 'Каминная'.
Вы находитесь: Каминная
Уютная комната с горящим камином. Кресла, книжные полки. Здесь хозяин ведёт свои философские беседы о двигателях первого и второго рода. Можно вернуться в Холл.

Предметы в комнате:
    Ключ от сейфа
Персонажи здесь:
Куда можно пойти:
    Холл
true.

?- взять('Ключ от сейфа').
Вы взяли: Ключ от сейфа
true.

?- 'Холл'.
Вы находитесь: Холл
Входная зона отеля. Здесь ощущеается теплый запах камина и старого дерева, а низкие столики тускло отсвечивают лаком. Хозяин Алекс Сневар обычно сидит за столиком с бумагами. Впереди лестница ведёт на второй этаж. Сбоку дверь в Каминную открыта.

Предметы в комнате:
    Фирменная настойка
Персонажи здесь:
    Алекс Сневар
Куда можно пойти:
    Каминная
    Контора
    Кухня
    Коридор к номерам Мозесов
    Коридор 2 этаж
true.

?- goto('Коридор 2 этаж').
Вы находитесь: Коридор 2 этаж
Длинный коридор с номерами гостей. Двери: Номер Олафа, Номер Хинкуса, Номер Симонэ, Номер дю Барнстокра, Номер Брюн, ваш Номер (4), Номер-музей. Лестница ведёт на Крышу и вниз в Холл.

Предметы в комнате:
Персонажи здесь:
Куда можно пойти:
    Столовая
    Номер Глебски (4)
    Номер Олафа
    Номер Хинкуса
    Номер Симонэ
    Номер Брюн
    Номер дю Барнстокра
    Номер-музей (Погибшего Альпиниста)
    Крыша
    Холл
true.

?- 'Номер_Олафа'.
Нельзя попасть отсюда.
false.

?- использовать('Связка ключей').

Вы открыли дверь.
true.

?- 'Номер_Олафа'.

ВНИМАНИЕ: СЦЕНА УБИЙСТВА!
Вы входите в номер Олафа. В комнате холодно.
На полу лежит тело Олафа Андварафорса. Его шея вывернута под неестественным углом. Необходимо осмотреть тело
В руке он сжимает ожерелье Кайсы.
Вы находитесь: Номер Олафа
Комната, где найден труп Олафа Андварафорса. Дверь опечатана, но у вас есть ключ. Странный аптечный запах. Окно открыто. Можно осмотреть комнату.

Предметы в комнате:
    Чемодан Олафа
    Тело Олафа
    Ожерелье Кайсы
Персонажи здесь:
Заметки для расследования:
    Улика: Химический запах изо рта Олафа
    Улика: Открытое окно в комнате Олафа
Куда можно пойти:
    Коридор 2 этаж
true.

?- осмотреть('Тело Олафа').
Вы чувствуете странный химический запах.
Вы поднимаете голову и видите, что окно в комнате широко распахнуто.
Надо зайти в свой номер и взять заметки для записи улик.
true .

?- взять('Чемодан Олафа').
Вы взяли: Чемодан Олафа
Чемодан тяжёлый. Внутри странный прибор, похожий на техническое устройство.
true .

?- использовать('Чемодан Олафа').
Вы открываете чемодан. Внутри сложный прибор с непонятным назначением.
true .

?- взять('Ожерелье Кайсы').
Вы взяли: Ожерелье Кайсы
true.

?- осмотреть('Ожерелье Кайсы').
Деревянные бусы Кайсы. Найдены в руке убитого Олафа.
Возможно, убийца хотел подставить Кайсу.
true .

?- осмотреться.
Вы находитесь: Номер Олафа
Комната, где найден труп Олафа Андварафорса. Дверь опечатана, но у вас есть ключ. Странный аптечный запах. Окно открыто. Можно осмотреть комнату.

Предметы в комнате:
    Тело Олафа
Персонажи здесь:
Куда можно пойти:
    Коридор 2 этаж
true.

?- goto('Коридор 2 этаж').
Вы находитесь: Коридор 2 этаж
Длинный коридор с номерами гостей. Двери: Номер Олафа, Номер Хинкуса, Номер Симонэ, Номер дю Барнстокра, Номер Брюн, ваш Номер (4), Номер-музей. Лестница ведёт на Крышу и вниз в Холл.

Предметы в комнате:
Персонажи здесь:
Куда можно пойти:
    Столовая
    Номер Глебски (4)
    Номер Олафа
    Номер Хинкуса
    Номер Симонэ
    Номер Брюн
    Номер дю Барнстокра
    Номер-музей (Погибшего Альпиниста)
    Крыша
    Холл
true.

?- 'Холл'.
Вы находитесь: Холл
Входная зона отеля. Здесь ощущеается теплый запах камина и старого дерева, а низкие столики тускло отсвечивают лаком. Хозяин Алекс Сневар обычно сидит за столиком с бумагами. Впереди лестница ведёт на второй этаж. Сбоку дверь в Каминную открыта.

Предметы в комнате:
    Фирменная настойка
Персонажи здесь:
    Алекс Сневар
Куда можно пойти:
    Каминная
    Контора
    Кухня
    Коридор к номерам Мозесов
    Коридор 2 этаж
true.

?- 'Кухня'.
Вы находитесь: Кухня
Кухня отеля, где работает Кайса. Чисто, пахнет едой. Дверь в Холл.

Предметы в комнате:
Персонажи здесь:
    Кайса
Куда можно пойти:
    Холл
true.

?- поговорить('Кайса').
Кайса (краснея): "Ой, господин инспектор! Я ничего не знаю!
Только вот ожерелье мое пропало, и кто-то в моей постели валялся...
И следы мокрые в коридоре видела..."
true .

?- 'Холл'.
Вы находитесь: Холл
Входная зона отеля. Здесь ощущеается теплый запах камина и старого дерева, а низкие столики тускло отсвечивают лаком. Хозяин Алекс Сневар обычно сидит за столиком с бумагами. Впереди лестница ведёт на второй этаж. Сбоку дверь в Каминную открыта.

Предметы в комнате:
    Фирменная настойка
Персонажи здесь:
    Алекс Сневар
Куда можно пойти:
    Каминная
    Контора
    Кухня
    Коридор к номерам Мозесов
    Коридор 2 этаж
true.

?- goto('Коридор 2 этаж').
Вы находитесь: Коридор 2 этаж
Длинный коридор с номерами гостей. Двери: Номер Олафа, Номер Хинкуса, Номер Симонэ, Номер дю Барнстокра, Номер Брюн, ваш Номер (4), Номер-музей. Лестница ведёт на Крышу и вниз в Холл.

Предметы в комнате:
Персонажи здесь:
Куда можно пойти:
    Столовая
    Номер Глебски (4)
    Номер Олафа
    Номер Хинкуса
    Номер Симонэ
    Номер Брюн
    Номер дю Барнстокра
    Номер-музей (Погибшего Альпиниста)
    Крыша
    Холл
true.

?- goto('Номер Глебски (4)').
Вы находитесь: Номер Глебски (4)
Ваш номер. Чисто, аккуратно, вид на долину. На столе лежат ваши заметки и какая-то записка. Можно выйти в Коридор 2 этажа.

Предметы в комнате:
    Заметки Глебски
    Сигареты
    Записка о Филине
Персонажи здесь:
Куда можно пойти:
    Коридор 2 этаж
true.

?- взять('Заметки Глебски').
Вы взяли заметки. Теперь в них можно проверить все найденные улики.
Введите "показать_улики.", чтобы увидеть уже собранные улики.
true.

?- показать_улики.
Заметки для расследования:
    • Открытое окно в комнате Олафа
    • Химический запах изо рта Олафа
true.

?- взять('Записка о Филине').
Вы взяли: Записка о Филине

СОДЕРЖАНИЕ ЗАПИСКИ:
"Инспектору Глебски. В отеле под именем Хинкус скрывается
опасный гангстер, маньяк и садист Филин. Он вооружен и угрожает одному из
постояльцев. Примите срочные меры."

Записка анонимная, написана отпечатанными буквами.
Теперь вы знаете о настоящей личности Хинкуса или о том, что его кто-то хочет подставить.

ВНИМАНИЕ!
Из соседнего номера-музея доносятся странные звуки:
  - Приглушенные стоны
  - Как будто кто-то стучит
Кто-то явно там есть!
Стоит проверить номер-музей.
true .

?- goto('Коридор 2 этаж').
Вы находитесь: Коридор 2 этаж
Длинный коридор с номерами гостей. Двери: Номер Олафа, Номер Хинкуса, Номер Симонэ, Номер дю Барнстокра, Номер Брюн, ваш Номер (4), Номер-музей. Лестница ведёт на Крышу и вниз в Холл.

Предметы в комнате:
Персонажи здесь:
Куда можно пойти:
    Столовая
    Номер Глебски (4)
    Номер Олафа
    Номер Хинкуса
    Номер Симонэ
    Номер Брюн
    Номер дю Барнстокра
    Номер-музей (Погибшего Альпиниста)
    Крыша
    Холл
true.

?- goto('Номер-музей (Погибшего Альпиниста)').

Хинкус найден!
Под столом вы находите связанного Хинкуса с кляпом во рту.
Он в ужасе, на шее у него синяки.
Вы освобождаете его. Хинкуса бьет дрожь, он ничего не может внятно объяснить.
Он молчит, трясясь от страха.

Вы помогаете Хинкусу освободиться от веревок.
Странно, сегодня он весь день провел на крыше.
Стрелка на его часах застыла, показывая время нападения. В этот момент все были в столовой на празднике,
но некоторые люди все же выходили. Например, Брюн и Олаф.
Хинкус благодарно кивает и пытается прийти в себя, всё еще потрясенный случившимся.
Он уходит в каминную за успокоительным бренди. У вас есть отличный шанс заглянуть в его номер и обыскать вещи.
Вы находитесь: Номер-музей (Погибшего Альпиниста)
Здесь хранятся вещи погибшего альпиниста: куртка, альпеншток, трубка. Трубка почему-то дымится.На столе лежит свежая газета.

Предметы в комнате:
    Трубка Альпиниста
    Свежая газета
Персонажи здесь:
Куда можно пойти:
    Коридор 2 этаж
true.

?- поговорить('Хинкус').
Здесь нет такого персонажа.
true.

?- goto('Коридор 2 этаж').
Вы находитесь: Коридор 2 этаж
Длинный коридор с номерами гостей. Двери: Номер Олафа, Номер Хинкуса, Номер Симонэ, Номер дю Барнстокра, Номер Брюн, ваш Номер (4), Номер-музей. Лестница ведёт на Крышу и вниз в Холл.

Предметы в комнате:
Персонажи здесь:
Куда можно пойти:
    Столовая
    Номер Глебски (4)
    Номер Олафа
    Номер Хинкуса
    Номер Симонэ
    Номер Брюн
    Номер дю Барнстокра
    Номер-музей (Погибшего Альпиниста)
    Крыша
    Холл
true.

?- 'Номер_Хинкуса'.
Вы находитесь: Номер Хинкуса
Комната Хинкуса. Беспорядок, запах лекарств. На столе бутылка бренди. Нужно обыскать (осмотреть) баул.

Предметы в комнате:
    Бутылка бренди
    Баул Хинкуса
Персонажи здесь:
Заметки для расследования:
    Улика: Пропавшие золотые часы
Куда можно пойти:
    Коридор 2 этаж
true.

?- осмотреть('Баул Хинкуса').
Вы открываете баул Хинкуса и находите:
1. Фальшивый багаж - тряпье и случайные книги
2. Во втором бауле: золотые часы Мозеса и дамский браунинг
true.

?- goto('Коридор 2 этаж').
Вы находитесь: Коридор 2 этаж
Длинный коридор с номерами гостей. Двери: Номер Олафа, Номер Хинкуса, Номер Симонэ, Номер дю Барнстокра, Номер Брюн, ваш Номер (4), Номер-музей. Лестница ведёт на Крышу и вниз в Холл.

Предметы в комнате:
Персонажи здесь:
Куда можно пойти:
    Столовая
    Номер Глебски (4)
    Номер Олафа
    Номер Хинкуса
    Номер Симонэ
    Номер Брюн
    Номер дю Барнстокра
    Номер-музей (Погибшего Альпиниста)
    Крыша
    Холл
true.

?- 'Крыша'.

Осмотр крыши
Теперь, зная о произошедшем с Хинкусом, вы осматриваете крышу внимательнее.
На шезлонге все еще лежит Хинкус, но как? Подойдя поближе, вы замечаете, что это просто снежное чучело.
Под одним из шезлонгов вы находите пистолет Люгер с серебряными пулями!
Люгер калибра 0.45 с удлиненной рукоятью. Вот это было настоящее гангстерское оружие.
Похоже, Хинкус держал его при себе на до нападения, но зачем?..
Вы находитесь: Крыша
Плоская крыша отеля, покрытая снегом. Шезлонги, павильон. Отсюда видна вся долина. Здесь сидел Хинкус. Лестница ведёт в Коридор 2 этажа.

Предметы в комнате:
    Пистолет Люгер
Персонажи здесь:
Куда можно пойти:
    Коридор 2 этаж
true.

?- взять('Пистолет Люгер').
Вы взяли: Пистолет Люгер
true.

?- осмотреть('Пистолет Люгер').
Нечего особого осматривать.
true.

?- 'Коридор_2_этаж'.
Вы находитесь: Коридор 2 этаж
Длинный коридор с номерами гостей. Двери: Номер Олафа, Номер Хинкуса, Номер Симонэ, Номер дю Барнстокра, Номер Брюн, ваш Номер (4), Номер-музей. Лестница ведёт на Крышу и вниз в Холл.

Предметы в комнате:
Персонажи здесь:
Куда можно пойти:
    Столовая
    Номер Глебски (4)
    Номер Олафа
    Номер Хинкуса
    Номер Симонэ
    Номер Брюн
    Номер дю Барнстокра
    Номер-музей (Погибшего Альпиниста)
    Крыша
    Холл
true.

?- 'Номер_Брюн'.
Вы находитесь: Номер Брюн
Номер чада дю Барнстокра. Разоренная кровать, у изголовья початая бутылка, на столе и кровати незаконченные плакаты.

Предметы в комнате:
    Початая бутылка виски
Персонажи здесь:
    Брюн
Куда можно пойти:
    Коридор 2 этаж
true.

?- поговорить('Брюн').
Брюн (не снимая черных очков, угрюмо): "Что вам еще нужно? Оставьте меня в покое. Брюн уходит к дяде.
true .

?- 'Коридор_2_этаж'.
Вы находитесь: Коридор 2 этаж
Длинный коридор с номерами гостей. Двери: Номер Олафа, Номер Хинкуса, Номер Симонэ, Номер дю Барнстокра, Номер Брюн, ваш Номер (4), Номер-музей. Лестница ведёт на Крышу и вниз в Холл.

Предметы в комнате:
Персонажи здесь:
Куда можно пойти:
    Столовая
    Номер Глебски (4)
    Номер Олафа
    Номер Хинкуса
    Номер Симонэ
    Номер Брюн
    Номер дю Барнстокра
    Номер-музей (Погибшего Альпиниста)
    Крыша
    Холл
true.

?- 'Номер_дю_Барнстокра'.
Вы находитесь: Номер дю Барнстокра
Номер известного фокусника. Всё изящно, на столе карточные колоды и бумаги. Чувствуется запах дорогих сигар.

Предметы в комнате:
    Записка
Персонажи здесь:
    Брюн
    дю Барнстокр
Куда можно пойти:
    Коридор 2 этаж
true.

?- поговорить('дю Барнстокр').
дю Барнстокр (вяло): "А? О чем речь? Брюн? Она отдыхает. Не тревожьте её, прошу вас."
true .

?- взять('Записка').
Вы взяли: Записка

Содержание записки:
"Мы вас нашли. Я держу вас на мушке. Не пытайтесь бежать не делайте глупостей.
Стрелять буду без предупреждения. Ф."
true .

?- допрос('Брюн').

=== Допрос Брюн ===
Вы резко приказываете: "Снимите очки!"
Брюн повинуется. Перед вами девушка с заплаканными, но очень красивыми глазами.

После нескольких наводящих вопросов она сдаётся и рассказывает правду:

"Мы были у него в номере... Мы целовались. Было весело, только холодно из-за открытого окна.
Он хотел надеть мне на шею какие-то бусы, похожие на ожерелье. И тут грянул обвал.
Он вдруг схватился за голову, будто что-то вспомнил... что-то очень важное.
Он бросился к окну, но сразу вернулся, схватил меня за плечи и вытолкнул за дверь,
грубо захлопнув дверь и повернув ключ. Я разозлилась и ушла к себе напиться."

На дальнейшие расспросы она добавляет:
- Он не пил, чувствовал себя прекрасно. Странного запаха не было.
- Слышался шум из комнаты Симонэ (шаги, вода).
- Олаф передвигал кресло, чтобы заблокировать дверь, но потом отодвинул.
- Больше в комнате никого, по её мнению, не было.

Это ключевые показания. Олаф явно что-то понял или услышал в момент обвала.
Внезапно в коридоре раздается беглый топот шагов. Дверь соседнего номера тихо закрывается.
Глебски: Странно, в той стороне только мой номер и номер Симонэ.
Надо сходить, проверить неугомонного физика.
true .

?- поговорить('дю Барнстокр').
дю Барнстокр (сокрушенно): "Дорогой инспектор! Я, конечно, понятия не имел... Дети растут. Ужасно растут."
true.

?- 'Коридор_2_этаж'.
Вы находитесь: Коридор 2 этаж
Длинный коридор с номерами гостей. Двери: Номер Олафа, Номер Хинкуса, Номер Симонэ, Номер дю Барнстокра, Номер Брюн, ваш Номер (4), Номер-музей. Лестница ведёт на Крышу и вниз в Холл.

Предметы в комнате:
Персонажи здесь:
Куда можно пойти:
    Столовая
    Номер Глебски (4)
    Номер Олафа
    Номер Хинкуса
    Номер Симонэ
    Номер Брюн
    Номер дю Барнстокра
    Номер-музей (Погибшего Альпиниста)
    Крыша
    Холл
true.

?- 'Номер_Хинкуса'.
Вы находитесь: Номер Хинкуса
Комната Хинкуса. Беспорядок, запах лекарств. На столе бутылка бренди. Нужно обыскать (осмотреть) баул.

Предметы в комнате:
    Бутылка бренди
    Баул Хинкуса
Персонажи здесь:
Куда можно пойти:
    Коридор 2 этаж
true.

?- взять('Баул Хинкуса').
Вы взяли: Баул Хинкуса
true.

?- осмотреть('Баул Хинкуса').
Вы открываете баул Хинкуса и находите:
1. Фальшивый багаж - тряпье и случайные книги
2. Во втором бауле: золотые часы Мозеса и дамский браунинг
true.

?- положить('Баул Хинкуса').
Вы положили Баул Хинкуса обратно в Номер Хинкуса
true.

?- инвентарь.
Ваш инвентарь:
    Записка
    Пистолет Люгер
    Записка о Филине
    Заметки Глебски
    Ожерелье Кайсы
    Чемодан Олафа
    Ключ от сейфа
    Связка ключей
false.

?- показать_улики.
Заметки для расследования:
    • Пропавшие золотые часы
    • Снежное чучело Хинкуса на крыше
    • Пропавшие золотые часы
    • Синяки на шее Хинкуса
    • Часовая стрелка часов Хинкуса сломана
    • Открытое окно в комнате Олафа
    • Химический запах изо рта Олафа
true.

?- 'Номер_Симонэ'.
Нельзя попасть отсюда.
false.

?- 'Коридор_2_этаж'.
Вы находитесь: Коридор 2 этаж
Длинный коридор с номерами гостей. Двери: Номер Олафа, Номер Хинкуса, Номер Симонэ, Номер дю Барнстокра, Номер Брюн, ваш Номер (4), Номер-музей. Лестница ведёт на Крышу и вниз в Холл.

Предметы в комнате:
Персонажи здесь:
Куда можно пойти:
    Столовая
    Номер Глебски (4)
    Номер Олафа
    Номер Хинкуса
    Номер Симонэ
    Номер Брюн
    Номер дю Барнстокра
    Номер-музей (Погибшего Альпиниста)
    Крыша
    Холл
true.

?- 'Номер_Симонэ'.
Вы находитесь: Номер Симонэ
Комната физика. Книги, расчёты на бумаге. На столе лежит разобранный радиоприёмник.

Предметы в комнате:
    Радиоприёмник
Персонажи здесь:
    Симонэ
Куда можно пойти:
    Коридор 2 этаж
true.

?- поговорить('Симонэ').
Симонэ (схватив Глебски за рукав, взволнованно): "Петер! Я должен тебе сказать. Я видел... я видел её!"

Глебски: "Кого?"
Симонэ (понизив голос до шёпота): "Госпожу Мозес. Она... она лежит в своём номере. Холодная. Без движения."

Глебски (недоверчиво): "Ты что, пьян?"
Симонэ (трясёт головой, глаза горят): "Я трезв как судья! Я принял твёрдое решение. Весь вечер готовился."
"В одиннадцать пошёл к ней в номер - поговорить, узнать что-нибудь. А она..."
Симонэ (собираясь с духом): "Дверь была приоткрыта. Я заглянул. Она лежала на кровати, одетая."
"Я позвал - не ответила. Подошёл ближе... Петер, она была холодная. Совсем."
Глебски: "И что ты сделал?"
Симонэ (растерянно): "Я... я испугался. Закрыл дверь и ушёл. Но потом подумал..."
Симонэ (умоляюще): "Проверь! Сходи в её номер! Дверь заперта, но у тебя же ключи!"
Глебски вздыхает. "Хорошо, проверю."
true .

?- использовать('Чемодан Олафа').
Вы открываете чемодан. Внутри сложный прибор с непонятным назначением.
true .

?- 'Коридор_2_этаж'.
Вы находитесь: Коридор 2 этаж
Длинный коридор с номерами гостей. Двери: Номер Олафа, Номер Хинкуса, Номер Симонэ, Номер дю Барнстокра, Номер Брюн, ваш Номер (4), Номер-музей. Лестница ведёт на Крышу и вниз в Холл.

Предметы в комнате:
Персонажи здесь:
Куда можно пойти:
    Столовая
    Номер Глебски (4)
    Номер Олафа
    Номер Хинкуса
    Номер Симонэ
    Номер Брюн
    Номер дю Барнстокра
    Номер-музей (Погибшего Альпиниста)
    Крыша
    Холл
true.

?- 'Холл'.
Вы находитесь: Холл
Входная зона отеля. Здесь ощущеается теплый запах камина и старого дерева, а низкие столики тускло отсвечивают лаком. Хозяин Алекс Сневар обычно сидит за столиком с бумагами. Впереди лестница ведёт на второй этаж. Сбоку дверь в Каминную открыта.

Предметы в комнате:
    Фирменная настойка
Персонажи здесь:
    Алекс Сневар
Куда можно пойти:
    Каминная
    Контора
    Кухня
    Коридор к номерам Мозесов
    Коридор 2 этаж
true.

?- 'Контора'.
Вы находитесь: Контора
Кабинет Алекса Сневара. Стол, уютное госетвое кресло, учётные книги, сейф. На столе лежат ключи от номеров. Можно покинуть Контору.

Предметы в комнате:
Персонажи здесь:
Куда можно пойти:
    Холл
true.

?- использовать('Ключ от сейфа').
Вы открыли сейф.
true .

?- использовать('Сейф').
Вы кладёте чемодан в сейф.
true .

?- использовать('Сейф').
Сейф надежно закрывается. Теперь чемодан в безопасности.
true .

?- использовать('Сейф').
Сейф заперт. Чемодан Олафа находится внутри.
true .

?- 'Холл'.
Вы находитесь: Холл
Входная зона отеля. Здесь ощущеается теплый запах камина и старого дерева, а низкие столики тускло отсвечивают лаком. Хозяин Алекс Сневар обычно сидит за столиком с бумагами. Впереди лестница ведёт на второй этаж. Сбоку дверь в Каминную открыта.

Предметы в комнате:
    Фирменная настойка
Персонажи здесь:
    Алекс Сневар
Куда можно пойти:
    Каминная
    Контора
    Кухня
    Коридор к номерам Мозесов
    Коридор 2 этаж
true.

?- goto('Коридор к номерам Мозесов').
Вы находитесь: Коридор к номерам Мозесов
Узкий коридор на первом этаже, ведущий к номерам супругов Мозес.

Предметы в комнате:
Персонажи здесь:
Куда можно пойти:
    Номер Мозесов (1)
    Номер Мозесов (2)
    Гостевая комната (первый этаж)
    Холл
true.

?- 'Номер_Мозесов_2'.
Нельзя попасть отсюда.
false.

?- использовать('Связка ключей').

Вы открыли дверь.
true.

?- 'Номер_Мозесов_2'.
Вы находитесь: Номер Мозесов (2)
Второй номер госпожи Мозес. Изящно обставлен, пахнет духами.

Предметы в комнате:
Персонажи здесь:
    Госпожа Мозес
    Мозес
Куда можно пойти:
    Коридор к номерам Мозесов
true.

?- поговорить('Мозес').
Вы входите в номер. Оба Мозеса стоят вместе - он мрачный и замкнутый, она...
госпожа Мозес выглядит совершенно нормально. Никаких признаков... ну, того, о чём говорил Симонэ.

Глебски (резко): "Госпожа Мозес. Мне сказали, что вы... что с вами случилось что-то."
госпожа Мозес (удивлённо поднимая брови): "Со мной? О, инспектор, какие глупости! Я просто читала журнал в своей комнате и заснула."
Её голос спокоен, почти мелодичен. Ни тени волнения.

Глебски: "Вы ничего не слышали? Не видели? Кто-то входил к вам?"
госпожа Мозес (лёгким жестом): "Я спала очень крепко. После ужина... вы знаете, горный воздух."
Мозес (хрипло вмешивается): "Видите, инспектор? Всё в порядке."
Глебски чувствует, что ему лгут. Но как? И зачем?
"Почему тогда ваша дверь была заперта изнутри?" - не сдаётся он.
госпожа Мозес (пожимая плечами): "Я всегда запираюсь на ночь. Привычка."

Диалог заканчивается. Они стоят рядом - странная, идеально невозмутимая пара.
Что-то здесь не так. Что-то фундаментально не так.
true .

?- goto('Коридор к номерам Мозесов').
Вы находитесь: Коридор к номерам Мозесов
Узкий коридор на первом этаже, ведущий к номерам супругов Мозес.

Предметы в комнате:
Персонажи здесь:
Куда можно пойти:
    Номер Мозесов (1)
    Номер Мозесов (2)
    Гостевая комната (первый этаж)
    Холл
true.

?- 'Холл'.
Вы находитесь: Холл
Входная зона отеля. Здесь ощущеается теплый запах камина и старого дерева, а низкие столики тускло отсвечивают лаком. Хозяин Алекс Сневар обычно сидит за столиком с бумагами. Впереди лестница ведёт на второй этаж. Сбоку дверь в Каминную открыта.

Предметы в комнате:
    Фирменная настойка
Персонажи здесь:
    Алекс Сневар
Куда можно пойти:
    Каминная
    Контора
    Кухня
    Коридор к номерам Мозесов
    Коридор 2 этаж
true.

?- поговорить('Алекс Сневар').
Алекс Сневар (хозяин отеля): "А, Петер! Странные дела творятся в моем отеле. Трубка курит сама,
вещи пропадают, а теперь это... это убийство. Я всегда чувствовал,
что дух Погибшего Альпиниста не покинул эти стены."
true .

?- 'Каминная'.
Вы находитесь: Каминная
Уютная комната с горящим камином. Кресла, книжные полки. Здесь хозяин ведёт свои философские беседы о двигателях первого и второго рода. Можно вернуться в Холл.

Предметы в комнате:
Персонажи здесь:
    Хинкус
Куда можно пойти:
    Холл
true.

?- поговорить('Хинкус').
Хинкус (дрожит): "Он... он пришел сзади. Я видел его раньше, днем.
Но говорить не буду! Не заставьте меня! Лучше убейте сразу, а еще лучше налейте бренди!"
На шее у Хинкуса свежие синяки.
true .

?- допрос('Хинкус').

=== ДОПРОС ХИНКУСА ===
Вы достаёте пистолет Люгер и кладёте его на стол перед Хинкусом.
Глебски:Х ватит врать, Филин! Мне все о тебе известно! Ты влип, Филин.
В отеле убили Олафа, Филин, а из гангстеров и без алиби ты здесь один.
И если ты хочешь отделаться семьдесят второй, тяни на пункт «ц»! Чистосердечное признание до начала официального следствия… Ну?
Хинкус (угрюмо): Филин какой-то. Я не Филин, я — Хинкус. Чего вы ко мне привязались?
После угроз он кидается на вас, завязывается драка.
Вам удается сбить его с ног, он грузно падает и тяжело дышит.
У вас кружится голова от ночи без сна, шатаются два зуба от тяжелой руки гангстера.
Через какое-то время, прийдя в себя, вы слышите:
"Я понял, что вам надо, господин инспектор. Я — Филин. Наёмник банды Чемпиона.
Мы использовали Вельзевула для ограблений, а потом он сбежал. Я должен был его ликвидировать.
Я выследил его, он в этом отеле. Его лица я не видел, но это точно один из постояльцев.
Он оборотень, колдун! Серебряные пули — единственное, что может его остановить!
Он всегда действовал с напарницей, а Олафа я увидел вчера впервые, он никогда и не был моей целью."
Он явно напуган.
true.

?- 'Холл'.
Вы находитесь: Холл
Входная зона отеля. Здесь ощущеается теплый запах камина и старого дерева, а низкие столики тускло отсвечивают лаком. Хозяин Алекс Сневар обычно сидит за столиком с бумагами. Впереди лестница ведёт на второй этаж. Сбоку дверь в Каминную открыта.

Предметы в комнате:
    Фирменная настойка
Персонажи здесь:
    Алекс Сневар
Куда можно пойти:
    Каминная
    Контора
    Кухня
    Коридор к номерам Мозесов
    Коридор 2 этаж
true.

?- goto('Коридор к номерам Мозесов').
Вы находитесь: Коридор к номерам Мозесов
Узкий коридор на первом этаже, ведущий к номерам супругов Мозес.

Предметы в комнате:
Персонажи здесь:
Куда можно пойти:
    Номер Мозесов (1)
    Номер Мозесов (2)
    Гостевая комната (первый этаж)
    Холл
true.

?- 'Номер_Мозесов_2'.
Вы находитесь: Номер Мозесов (2)
Второй номер госпожи Мозес. Изящно обставлен, пахнет духами.

Предметы в комнате:
Персонажи здесь:
    Госпожа Мозес
    Мозес
Куда можно пойти:
    Коридор к номерам Мозесов
true.

?- допрос('Мозес').

=== ДОПРОС ГОСПОДИНА МОЗЕСА ===
Мозес (хрипло, после долгого молчания): "Всё сложнее, чем вы думаете, инспектор..."

Глебски: "Бросьте эти сказки. Что вы знаете об убийстве?"
Мозес (отхлебывая из своей кружки): "Олаф не убит. Он вообще не живое существо."
Он механизм. Робот. Как и госпожа Мозес. Мы наблюдатели, не с этой планеты."

Глебски (саркастически): "Понятно. И прибыли вы с Венеры?"
Мозес (печально): "Этого я не скажу. Важно другое: Олаф - наш робот-смотритель."
Он отключился из-за аварии на станции. Чемодан содержит аккумулятор для него."

Вы пытаетесь остаться непредубежденным, но слова льются безостановочно:
"Полтора месяца назад я попал в лапы бандитов. Меня шантажировали, заставляли грабить банки."
"Я пытался бежать, но они выпустили на мой след Филина - Хинкуса."
"Пришлось скрываться здесь, надеясь улететь до их прибытия."

Глебски: "Хорошая сказка. А почему вы не покажетесь в своем истинном обличье?"
Мозес (качая головой): "Это скафандр, инспектор. Под ним... другая форма жизни."
"Показать себя - значит почти наверняка погибнуть в вашей атмосфере."
"Но если вы окончательно не поверите... я рискну, лишь бы спасти Луарвика."

Он предлагает возместить все убытки - и за ограбление Второго Национального,
и за золотой броневик. Чистым золотом. Миллион крон сейчас, остальное позже.

Глебски чувствует странное сочувствие к этому существу.
Полицейская часть его требует арестовать преступника.
Человеческая часть кричит, что перед ним - не человек в обычном смысле.

Мозес (тихо): "Есть только две возможности, инспектор."
"Либо вы отдаете нам аккумулятор, и мы попытаемся спастись."
"Либо... Я не могу попасть живым в руки официальных лиц."
"Это мой долг перед нашими мирами. Я провалился, но я первый, не последний..."

Вы понимаете: если это правда, то дело не просто в убийстве.
Речь идет о первом контакте. И он происходит в самый неподходящий момент.
true.

?- 'Холл'.
Нельзя попасть отсюда.
false.

?- goto('Коридор к номерам Мозесов').
Вы находитесь: Коридор к номерам Мозесов
Узкий коридор на первом этаже, ведущий к номерам супругов Мозес.

Предметы в комнате:
Персонажи здесь:
Куда можно пойти:
    Номер Мозесов (1)
    Номер Мозесов (2)
    Гостевая комната (первый этаж)
    Холл
true.

?- 'Холл'.
Вы находитесь: Холл
Входная зона отеля. Здесь ощущеается теплый запах камина и старого дерева, а низкие столики тускло отсвечивают лаком. Хозяин Алекс Сневар обычно сидит за столиком с бумагами. Впереди лестница ведёт на второй этаж. Сбоку дверь в Каминную открыта.

Предметы в комнате:
    Фирменная настойка
Персонажи здесь:
    Алекс Сневар
Куда можно пойти:
    Каминная
    Контора
    Кухня
    Коридор к номерам Мозесов
    Коридор 2 этаж
true.

?- 'Контора'.
Вы находитесь: Контора
Кабинет Алекса Сневара. Стол, уютное госетвое кресло, учётные книги, сейф. На столе лежат ключи от номеров. Можно покинуть Контору.

Предметы в комнате:
Персонажи здесь:
Куда можно пойти:
    Холл
true.

?- расследовать.

=== АНАЛИЗ УЛИК ===

Все улики собраны!

ВЫВОДЫ:
1. Убийца не призрак - были мокрые следы
2. Хинкус не убийца - его самого пытались убить
3. Олаф был не туристом - у него был специальный прибор
4. Убийство совершено с чудовищной силой - нужен очень сильный человек
5. Окно было открыто для отвода глаз - убийца вошел через дверь

ПОДОЗРЕВАЕМЫЕ:
- Алекс Сневар: сильный, знает все ходы в отеле
- Однорукий незнакомец: появился в ночь убийства
- Мозес: сильный, пьяный, непредсказуемый
- Симонэ: альпинист, очень сильный физически
- Кайса: имеет мотив, если Олаф её оскорбил
- Брюн: была в номере Олафа перед убийством

...но улики противоречат друг другу. Нет ни одного человека, который...
...Глебски садится на стул, прислонившись спиной к сейфу.

В голове проносятся слова:
"Алекс: Дух Погибшего Альпиниста не покинул эти стены..."
"Хинкус: Он оборотень, колдун! Вельзевул среди нас!"
"Симонэ: Это не мистика, это научная фантастика!"

Что, если все они правы по-своему?
Что, если "мистика" Алекса и "Вельзевул" Хинкуса - это...

Глебски садится на стул в конторе, прислонившись спиной к сейфу.
Проклятый Филин его доконал. Плечо болит, голова туманится.
Он расстилает газеты перед сейфом, придвигает конторку к двери...

...и просыпается от настойчивого стука в дверь. На часах - начало первого.

=== ПОЛНОЧЬ. КОНТОРА. ===
Симонэ входит. Вид у него торжественный и деловой, но чувствуется возбуждение.
Симонэ: "Пока вы дрыхли, инспектор, я выполнил за вас всю вашу работу."

Глебски (язвительно): "Неужели Мозес уже в наручниках?"
Симонэ (нахмурившись): "В этом нет необходимости. Мозес ни в чем не виновен."
"Здесь всё гораздо сложнее, чем вы думаете."

Глебски: "Только не рассказывайте о вурдалаках."
Симонэ (усмехаясь): "Никаких вурдалаков. Сплошная научная фантастика."
"Мозес - не человек, инспектор. Он и Луарвик - не земляне."

И он рассказывает. Как Мозес полтора года на Земле. Как попал в лапы бандитов.
Как Чемпион шантажом втянул его в банду. Как должна была состояться эвакуация.
Как вчера в полночь произошла авария - что-то взорвалось в аппаратуре.
Как Луарвику пришлось идти сюда пешком, через горы...

Симонэ (умоляюще): "Петер, ты должен помочь им. Это просто наша обязанность."
"Если гангстеры поспеют сюда раньше полиции, они их убьют. Нас тоже, возможно."
"Но если мы допустим убийство инопланетников, это будет позор!"

Глебски (сухо): "Короче, что вам от меня надо?"
Симонэ: "Отдайте им аккумулятор, Петер. В чемодане - энергия для их роботов."

И тогда всё встаёт на свои места:
- "Химический запах" изо рта Олафа - охлаждающая жидкость или машинное масло
- "Чудовищная сила" при вывихе шеи - механическая сила робота
- "Свернутая шея" у госпожи Мозес - квазиагонические явления при отключении
- "Свежая газета" в музее - её менял да хоть хозяин, для мистификации

Симонэ (настойчиво): "Это легко проверить. Отдайте аккумулятор -
и они в вашем присутствии снова включат Олафа. Ведь хотите же вы,
чтобы Олаф снова был жив?"

Но Глебски полицейский. Он думает о законе, о долге.
О госпоже Мозес, руками которой уже совершены преступления.
О том, что даже пришельцам не должно быть позволено грабить банки. Он неприклонен.

Симонэ (горько): "Вот тебе и первый контакт. Вот тебе и встреча двух миров."
"А вы, однако, порядочная дубина, Глебски."

Он уходит. Глебски остаётся один перед сейфом.
Вот два факта: закон требует задержать этих людей.
И второй факт: они хотят уйти. От закона? От гангстеров? От контакта?
Эти два факта противостоят друг другу. И решение за тобой.

Симонэ (умоляюще): "Петер, ты должен помочь им. Им нужен чемодан,
чтобы улететь. Если они останутся здесь... банда Чемпиона их найдёт и убьёт."

Теперь у тебя есть все факты. Пора принимать решение.
Введи "закончить.", чтобы закончить расследование.
true .

?- закончить.
=== ВРЕМЯ ПРИНЯТЬ РЕШЕНИЕ ===
Вы собрали все улики. Что вы сделаете?
1. Сострадание - помочь пришельцам (отдать чемодан, обеспечить побег)
2. Долг - действовать по закону (охранять сейф до приезда полиции)
|: 1
|: 1.

ERROR: Stream user_input:1114:2 Syntax error: Operator expected
?- закончить.
=== ВРЕМЯ ПРИНЯТЬ РЕШЕНИЕ ===
Вы собрали все улики. Что вы сделаете?
1. Сострадание - помочь пришельцам (отдать чемодан, обеспечить побег)
2. Долг - действовать по закону (охранять сейф до приезда полиции)
|: 1.
Вы решаете помочь. Отдаёте чемодан Луарвику.
Ночью пришельцы активируют Олафа. Тот встаёт и произносит: "Система восстановлена."
Вы помогаете им незаметно покинуть отель через подвал.
Наутро вы обнаруживаете, что они исчезли без следа.
Вам остаётся только составить отчёт о "неустановленных личностях, скрывшихся в горах".
=== КОНЕЦ: СОСТРАДАНИЕ ===
Вы спасли не тех, кого привыкли спасать, теперь перед вами гора бумажной работы и верный друг Симонэ.
true .

?- справка.
ОСНОВНЫЕ КОМАНДЫ:
  справка.               - Показать этот список команд
  старт.                 - Начать игру (только в начале)
  осмотреться.           - Осмотреться вокруг
  инвентарь.             - Проверить содержимое инвентаря
  остановить.            - Прекращение игры

ПЕРЕМЕЩЕНИЕ:
  идти('Локация').       - Перейти в указанную локацию
  или сокращения:        'Холл', 'Каминная', 'Контора' и т.д.
  (просто введите название локации без кавычек)

ВЗАИМОДЕЙСТВИЕ С ПРЕДМЕТАМИ:
  взять('Предмет').      - Взять предмет
  осмотреть('Предмет').  - Осмотреть предмет внимательно
  использовать('Предмет'). - Использовать предмет
  открыть('Дверь').      - Открыть запертую дверь (нужны ключи)

ОБЩЕНИЕ И РАССЛЕДОВАНИЕ:
  поговорить('Персонаж'). - Поговорить с персонажем
  допрос('Персонаж').    - Начать официальный допрос
  показать_улики.    - Посмотреть заметки Глебски касательно дела
  расследовать.          - Проанализировать собранные улики
true.

?- остановить.